#include <wiringPi.h>
#include <stdio.h>

// Define GPIO pins for motor control
const int IN1 = 24;
const int IN2 = 23;
const int ENA = 25;

// Function to start the motor forward
void startMotor() {
  digitalWrite(IN1, HIGH);
  digitalWrite(IN2, LOW);
}

// Function to set the motor speed
void setSpeed(int speed) {
  pwmWrite(ENA, speed);
}

// Function to stop the motor
void stopMotor() {
  digitalWrite(IN1, LOW);
  digitalWrite(IN2, LOW);
}

int main() {
  wiringPiSetup();

  pinMode(IN1, OUTPUT);
  pinMode(IN2, OUTPUT);
  pinMode(ENA, OUTPUT);

  char choice;

  while (1) { // Loop indefinitely
    printf("Press r for forward, h for high speed, l for low speed, e for stop and exit: ");
    scanf(" %c", &choice);

    if (choice == 'r') {
      startMotor();
      printf("Motor started forward\n");
    } else if (choice == 'h') {
      setSpeed(255);  // Adjust high speed value as needed
      printf("Motor set to high speed\n");
    } else if (choice == 'l') {
      setSpeed(50);   // Adjust low speed value as needed
      printf("Motor set to low speed\n");
    } else if (choice == 'e') {
      stopMotor();
      printf("Motor stopped\n");
      return 0; // Exit the program
    } else {
      printf("Invalid choice\n");
    }
  }

  return 0;
}

sudo nano /etc/systemd/system/pigpio.service

[Unit]
Description=Daemon for pigpio library

[Service]
ExecStart=/usr/local/bin/pigpiod

[Install]
WantedBy=multi-user.target
